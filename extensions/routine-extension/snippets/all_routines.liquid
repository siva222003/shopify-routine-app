<div class="flex justify-center px-[10px] sm:px-[20px]">
  <!-- Actual Data -->

  <template x-transition.opacity.duration.100ms x-if="!isLoading">
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-y-[30px] gap-x-[15px] sm:gap-x-[20px] md:gap-x-[30px] xl:gap-x-[40px] custom-grid-gap">
      <template class="mb-[200px]" x-for="routine in visibleRoutines" :key="routine._id">
        <a :href="`/pages/routine?id=${routine._id}`">
          <div class="flex flex-col gap-3 w-full md:w-fit">
            <!-- Skeleton Loader Wrapper -->
            <div
              class="relative w-[45vw] h-[45vw] md:h-[220px] md:w-[220px] rounded-2xl lg:h-[250px] lg:w-[250px] bg-gray-200 overflow-hidden"
            >
              <!-- Shimmer Effect -->
              <div
                x-show="!routine.loaded"
                class="absolute inset-0 bg-primaryCream"
              ></div>

              <!-- Actual Image -->
              <img
                loading="lazy"
                width="1200"
                height="1200"
                style="object-fit: cover; object-position: center; aspect-ratio: 1/1;"
                :src="routine.image"
                class="w-full h-full object-cover rounded-2xl transition-transform duration-700 ease-out scale-95"
                :class="{ 'scale-100': routine.loaded }"
                alt="Routine Image"
                @load="routine.loaded = true;"
                @error="routine.loaded = true;"
              >
            </div>

            <div class="flex justify-between">
              <h1 x-text="routine?.name" class="text-[12px] xsm:text-[14px] sm:text-[16px] font-[500]"></h1>
            </div>

            <div class="flex gap-3 items-center">
              <svg width="19" height="16" viewBox="0 0 19 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4.57622 0.536621V3.75636M14.7894 0.536621V3.75636M18.1649 14.5754C18.1649 15.2159 17.6457 15.7352 17.0051 15.7352H2.36048C1.71995 15.7352 1.20068 15.2159 1.20068 14.5754V3.46209C1.20068 2.82155 1.71995 2.30229 2.36048 2.30229H17.0051C17.6457 2.30229 18.1649 2.82155 18.1649 3.46209V14.5754ZM6.08656 6.48276H3.97468V8.59463H6.08656V6.48276ZM10.6911 8.59463H8.57926V6.48276H10.6911V8.59463ZM15.3909 8.59463H13.279V6.48276H15.3909V8.59463ZM6.06059 10.6719H3.94872V12.7838H6.06059V10.6719ZM10.6652 12.7838H8.5533V10.6719H10.6652V12.7838ZM15.365 12.7838H13.2531V10.6719H15.365V12.7838Z" stroke="#3A643B" stroke-width="0.506454" stroke-miterlimit="10"/>
              </svg>

              <h1
                x-text="routine?.duration?.number + ' ' + routine.duration.unit"
                class="text-[12px] sm:text-[13px] mt-1 text-primaryGrey"
              ></h1>
            </div>

            <div class="flex gap-3 items-center">
              <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.42125 2.22873H13.7932C13.9661 2.22873 14.0958 2.09905 14.0958 1.92613C14.0958 1.75322 13.9661 1.62354 13.7932 1.62354H5.42125C5.24834 1.62354 5.11865 1.75322 5.11865 1.92613C5.11865 2.09905 5.24834 2.22873 5.42125 2.22873Z" fill="#3A643B"/>
                <path d="M2.02158 0.311035C1.12819 0.311035 0.407715 1.03151 0.407715 1.9249C0.407715 2.81829 1.12819 3.53877 2.02158 3.53877C2.91497 3.53877 3.63545 2.81829 3.63545 1.9249C3.63545 1.03151 2.91497 0.311035 2.02158 0.311035ZM2.02158 2.93357C1.45961 2.93357 1.01291 2.48687 1.01291 1.9249C1.01291 1.36293 1.45961 0.916235 2.02158 0.916235C2.58355 0.916235 3.03025 1.36293 3.03025 1.9249C3.03025 2.48687 2.56914 2.93357 2.02158 2.93357Z" fill="#3A643B"/>
                <path d="M13.7932 6.65088H5.42125C5.24834 6.65088 5.11865 6.78056 5.11865 6.95348C5.11865 7.12639 5.24834 7.25608 5.42125 7.25608H13.7932C13.9661 7.25608 14.0958 7.12639 14.0958 6.95348C14.0958 6.78056 13.9661 6.65088 13.7932 6.65088Z" fill="#3A643B"/>
                <path d="M2.02158 5.34229C1.12819 5.34229 0.407715 6.06276 0.407715 6.95615C0.407715 7.84954 1.12819 8.57002 2.02158 8.57002C2.91497 8.57002 3.63545 7.84954 3.63545 6.95615C3.63545 6.06276 2.91497 5.34229 2.02158 5.34229ZM2.02158 7.96482C1.45961 7.96482 1.01291 7.51812 1.01291 6.95615C1.01291 6.39418 1.45961 5.94748 2.02158 5.94748C2.58355 5.94748 3.03025 6.39418 3.03025 6.95615C3.03025 7.51812 2.56914 7.96482 2.02158 7.96482Z" fill="#3A643B"/>
                <path d="M13.7932 11.6821H5.42125C5.24834 11.6821 5.11865 11.8118 5.11865 11.9847C5.11865 12.1576 5.24834 12.2873 5.42125 12.2873H13.7932C13.9661 12.2873 14.0958 12.1576 14.0958 11.9847C14.0958 11.8118 13.9661 11.6821 13.7932 11.6821Z" fill="#3A643B"/>
                <path d="M2.02158 10.3735C1.12819 10.3735 0.407715 11.094 0.407715 11.9874C0.407715 12.8808 1.12819 13.6013 2.02158 13.6013C2.91497 13.6013 3.63545 12.8808 3.63545 11.9874C3.63545 11.094 2.91497 10.3735 2.02158 10.3735ZM2.02158 12.9961C1.45961 12.9961 1.01291 12.5494 1.01291 11.9874C1.01291 11.4254 1.45961 10.9787 2.02158 10.9787C2.58355 10.9787 3.03025 11.4254 3.03025 11.9874C3.03025 12.535 2.56914 12.9961 2.02158 12.9961Z" fill="#3A643B"/>
              </svg>

              <h1
                class="text-[12px] sm:text-[13px] mt-1 text-primaryGrey"
                x-text="routine?.productReminders?.length + routine?.activityReminders?.length + ' Reminder Items'"
              ></h1>
            </div>

            <div class="flex gap-3 items-center">
              <svg width="14" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path   d="M5 10H7C9 10 10 9 10 7V5C10 3 9 2 7 2H5C3 2 2 3 2 5V7C2 9 3 10 5 10Z" stroke="#3A643B" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path   d="M17 10H19C21 10 22 9 22 7V5C22 3 21 2 19 2H17C15 2 14 3 14 5V7C14 9 15 10 17 10Z" stroke="#3A643B" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path   d="M17 22H19C21 22 22 21 22 19V17C22 15 21 14 19 14H17C15 14 14 15 14 17V19C14 21 15 22 17 22Z" stroke="#3A643B" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path   d="M5 22H7C9 22 10 21 10 19V17C10 15 9 14 7 14H5C3 14 2 15 2 17V19C2 21 3 22 5 22Z" stroke="#3A643B" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <h1
                class="text-[12px] sm:text-[13px] mt-1 text-primaryGrey"
                x-text="routine?.category?.name"
              ></h1>
            </div>
          </div>
        </a>
      </template>
    </div>
  </template>
</div>

<style>
  .scale-105 {
    transform: scale(0.95);
  }
  .scale-100 {
    transform: scale(1);
  }
</style>
